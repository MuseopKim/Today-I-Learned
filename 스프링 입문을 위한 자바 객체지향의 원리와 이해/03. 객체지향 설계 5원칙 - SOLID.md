# 객체지향 설계 5원칙 - SOLID

객체지향의 4대 특성은 객체지향을 실현하기 위한 재료들이다.
객체지향 설계 5원칙은 로버트 C.마틴이 정립한 객체 지향 5원칙인데, 마이클 페더스가 두문자어로 SOLID라 소개 했다. 이 5원칙은 객체지향의 4대 특성을 잘 사용하는 도구 사용법에 관한 것이다.

**SOLID**

- SRP(Single Responsibility Principle) : 단일 책임 원칙
- OCP(Open Closed Principle) : 개방 폐쇄 원칙
- LSP(Liskov Substitution Principle) : 리스코프 치환 원칙
- ISP(Interface Segregation Principle) : 인터페이스 분리 원칙
- DIP(Dependency Inversion Principle) : 의존 역전 원칙

---

## 결합도와 응집도

좋은 소프트웨어를 위해서는 결합도를 낮추고 응집도를 높여야 한다.

결합도는 모듈 간의 상호 의존성 정도이다. 결합도가 낮으면 객체의 재사용성이 높아지고, 수정이나 유지보수가 용이해진다.

응집도는 하나의 모듈 내부에 존재하는 요소들이 기능적으로 얼마나 응집도가 높은지에 관한 것이다. 응집도가 높을 수록 하나의 책임에 집중함으로써 재사용성이 높아진다.

---

## SRP - 단일 책임 원칙

하나의 객체는 하나의 역할과 책임만을 담당해야 한다. 만일 하나의 클래스에 수 많은 역할과 책임을 부여하면 분기 처리 등으로 인해 코드의 복잡성을 가중시키게 된다. 반드시 하나의 객체에는 최소한의 역할과 책임만을 할당해야 한다.

---

## OCP - 개방 폐쇄 원칙

클래스, 모듈, 함수는 확장에 대해서는 열려 있어야 하며 변경에 대해서는 닫혀 있어야 한다는 의미이다.

자바에서는 상위 클래스 또는 인터페이스를 중간에 둠으로써 확장에 유연한 모듈을 만들 수 있다.

JDBC를 사용하는 클라이언트는 데이터베이스가 오라클에서 MySQL로 변경 되더라도 Connection 설정 이외에는 따로 수정을 할 필요가 없다. JDBC 인터페이스를 중간에 두고 각 JDBC 드라이버로 구현 함으로써 개방 폐쇄 원칙을 실현 한 것이다.

자바에도 개방 폐쇄 원칙이 적용되어 있다. 자바 개발자는 작성하고 있는 소스코드가 윈도우에서 구동 될지, 리눅스에서 구동 될 지 혹은 다른 운영체제에서 구동 될지에 대해 신경쓰지 않아도 된다. 각 운영체제별 JVM, 목적 파일이 있기 때문이다. 이 사례 역시 소스 코드는 운영체제의 변화에 닫혀 있고, 각 운영체제별 JVM은 확장에 열려 있는 구조가 되는 것이다. 개발자의 소스코드와 운영체제별 JVM 사이에는 목적 파일이라는 완충 장치가 있는 것이다.

---

## LSP - 리스코프 치환 원칙

**서브 타입은 언제나 자신의 기반 타입으로 교체할 수 있어야 한다. (로버트 C.마틴)**

⇒ 하위 클래스의 인스턴스는 상위형 객체 참조 변수에 대입해 상위 클래스의 인스턴스 역할을 하는 데 문제가 없어야 한다.

객체 지향에서의 상속은 조직도와 계층도가 아닌 분류도가 되어야 한다.

- 하위 분류는 상위 분류의 한 종류다.
- 구현 분류는 '인터페이스' 할 수 있어야 한다.

---

## ISP - 인터페이스 분리 원칙

**클라이언트는 자신이 사용하지 않는 메서드에 의존 관계를 맺으면 안된다. (로버트 C.마틴)**

SRP (단일 책임 원칙)과 ISP(인터페이스 분할 원칙)은 같은 문제에 대한 두 가지 다른 해결책이라 할 수 있다.

보통 상위 클래스는 풍성할 수록 좋고, 인터페이스는 작을수록 좋다. (인터페이스 최소주의 원칙)

---

## DIP - 의존 역전 원칙

**고차원 모듈은 저차원 모듈에 의존하면 안 된다. 이 두 모듈 모두 다른 추상화된 것에 의존해야 한다. 추상화 된 것은 구체적인 것에 의존하면 안된다. 구체적인 것이 추상화된 것에 의존해야 한다. 자주 변경되는 구체 클래스에 의존하지 마라. (로버트 C.마틴)**

⇒ 자신보다 변하기 쉬운 것에 의존하지 마라.

변하기 쉬운 것에 의존하던 것을 추상화된 인터페이스나 상위 클래스를 두어 변하기 쉬운 것의 변화에 영향 받지 않게 하는 것.
상위 클래스 일수록, 인터페이스일수록, 추상 클래스일수록 변하지 않을 가능성이 높기 때문에 하위 클래스나 구체 클래스가 아닌 상위 클래스, 인터페이스, 추상 클래스에 의존하라는 것을 말한다.

---

## SoC - 관심사의 분리

하나의 메서드, 하나의 클래스, 하나의 모듈, 하나의 패키지에는 하나의 관심사만 들어 있어야 한다. 관심사가 다르고 변화의 시기가 다르면 분리해야 한다는 것인데, SoC를 적용하면 자연스레 SRP, ISP, OCP에 도달하게 된다.
스프링 또한 SoC를 통해 SOLID를 극한까지 적용하고 있다.

---

## SOLID 정리

- SRP(단일 책임 원칙) : 어떤 클래스를 변경해야 하는 이유는 오직 하나 뿐이어야 한다.
- OCP(개방 폐쇄 원칙) : 자신의 확장에는 열려 있고, 주변의 변화에는 닫혀 있어야 한다.
- LSP(리스코프 치환 원칙) : 서브 타입은 언제나 자신의 기반 타입으로 교체할 수 있어야 한다.
- ISP(인터페이스 분리 원칙) : 클라이언트는 자신이 사용하지 않는 메서드에 의존 관계를 맺으면 안된다.
- DIP(의존 역전 원칙) : 자신보다 변하기 쉬운 것에 의존하지 마라
