# 라우터

## 라우터가 하는 일

    라우터는 데이터 패킷이 목적지까지 갈 수 있는 길을 검사하고 가장 효율적인 경로를 결정한다. 이를 '경로 결정'이라 한다. 그리고 길이 결정되면 그쪽으로 데이터 패킷을 스위칭 해준다. 이 것을 '스위칭'이라 한다.

라우터가 효율적인 경로를 결정하는데에는 '라우팅 알고리즘', 즉 '라우팅 프로토콜'이 사용 된다. 이를 위해서 라우팅 테이블이란 것을 만들어서 라우팅 알고리즘을 관리한다.

이러한 처리들을 위해서 라우터는 PC처럼 CPU, 메모리, 인터페이스를 가지고 있다. 그리고 소프트웨어인 IOS가 라우터에 들어간다. IOS에는 라우팅 프로토콜, 보안 기능, 편의성을 제공 하는 다양한 라우터의 운용에 관한 내용이 들어 있다.

**인터페이스**

라우터에 나와있는 접속 가능한 포트

- Ethernet : 내부 네트워크와 접속할 때 사용하는 인터페이스 (일반적으로 허브나 스위치와 연결)
- Serial : WAN과의 접속을 위한 인터페이스. 외부 네트워크로의 연결을 위해서 사용한다. DSU / CSU와 연결한다.
  - DSU : 전용선용 모뎀

---

## 라우팅 프로토콜, 라우티드 프로토콜

### 라우티드 프로토콜

라우팅을 당하는, 즉 라우터가 라우팅을 해주는 대상 (TCP/IP 혹은 IPX와 같은 것들이 이에 해당 된다.)

### 라우팅 프로토콜

라우터 측에서 라우티드 프로토콜들에게 목적지까지 가장 좋은 경로를 안내하는 역할을 한다. RIP, IGRP, OSPF, EIGRP등이 있다.

⇒ 라우티드 프로토콜과 더불어 라우팅의 성능을 결정한다.

### 라우팅 알고리즘

라우팅 프로토콜의 다른말로, 라우팅 테이블을 가지고 있으면서 가지가 찾아갈 경로에 대한 정보를 그 곳에 기억해둔다. 라우팅 프로토콜이 운전사라면 라우팅 테이블은 이정표(목적지, 목적지까지의 거리, 경로 정보)와 같은 역할을 한다고 할 수 있다. 어떤 알고리즘을 사용하느냐에 따라서 라우팅 테이블의 내용이 달라진다.

---

## 스태틱(Static) 라우팅 프로토콜과 다이나믹(Dynamic) 라우팅 프로토콜

### 스태틱(Static) 라우팅 프로토콜

한번 정해지면 정해진 그대로 수행하는 프로토콜이다. 사람이 입력 해준대로 데이터를 전송만 하면 되기 때문에 라우터 자체에 부담이 들지 않아 라우팅하는 속도가 빨라지고 라우터의 성능이 좋아진다. 사람이 주도한대로 움직이기 때문에 다이나믹 라우팅 방식처럼 라우터들끼리 라우팅 테이블을 교환 할 필요가 없다. 그러므로 대역폭을 절약할 수 있으며 보안에도 강하다.

그러나 사람이 라우터에 일일이 수동으로 입력을 해주어야 하고 해당 경로에 문제가 있을 시 큰 문제가 발생한다.

### 다이나믹(Dynamic) 라우팅 프로토콜

라우터끼리 라우팅 테이블을 교환하며 경로를 지속 탐색한다. 그러므로 사람이 개입 할 일이 많이 없다. 그러나 라우터에 부담을 줄 수 있다. RIP, IGRP, OSPF, EIGRP 등이 이런 다이나믹 라우팅 프로토콜에 속한다. 일반적으로 라우팅 환경에서는 다이나믹 프로토콜을 사용한다.

---

## 라우팅 테이블

라우팅 테이블이란, 라우터가 경로를 찾을 때 사용하는 것이고 이것은 사용하는 라우터의 프로토콜에 따라 달라진다. 또한 라우터는 항상 최적의 경로를 찾아서 그 경로를 라우팅 테이블에 유지 시킨다. 즉, 최적의 경로를 제공하는 네트워크에 대한 지도라 할 수 있다.

라우팅 테이블은 RAM에 올라가기 때문에 라우터 전원을 끄면 모두 지워지게 된다.

---

## AS(Autonomous System), 내부용과 외부용 라우팅 프로토콜

### AS(Autonomous System)

하나의 네트워크 관리자에 의해서 관리되는 라우터들의 집단 (하나의 관리 전략으로 구성된 라우터 집단)

예를 들어 어떤 기업이 네트워크를 구축하면, 네트워크 안에는 여러 대의 라우터가 올 수 있다. 이렇게 기업에 소속된 모든 라우터들은 그 기업의 네트워크 관리자에 의해 관리를 받게 되는데, 이 것이 바로 AS다.

라우터가 가지는 정보를 효율적으로 관리 하고 인터넷 서비스를 좀 더 간편하게 제공하기 위해 AS라는 그룹으로 한 번에 관리 한다.

외부로 나갈 때는 그 AS에 있는 문지기 라우터(ASBR; Autonomous System Boundary Router)에게 정보를 묻고 나가게 된다. 문지기 라우터는 자신의 AS와 인접한 다른 AS에 대한 정보를 가지고 있으면서 자기 AS에서 밖으로 나가는 라우터나 외부 AS에서 자기 AS쪽으로 들어오는 라우터에게 정보를 제공한다. 그렇기 때문에 라우터들은 인터넷에 접속할 때도 전 세계의 모든 네트워크에 대한 정보를 다 가지고 있을 필요가 없고, 단지 자신이 속한 AS에 대한 정보만 가지면 된다.

### 내부용 프로토콜(Interior Routing Protocol)

라우터가 AS 내부에서 사용하는 라우팅 프로토콜, 다른 말로 IGP(Interior Gateway Protocol) 이라 한다.

### 외부용 프로토콜(Exterior Routing Protocol)

AS 외부에서 서로 라우팅 정보를 주고받기 위해 라우터가 사용하는 프로토콜, 또는 EGP(Exterior Gateway Protocol)이라고 한다.
