# 데이터베이스 디스크 읽기 방식

## 디스크 읽기 방식

데이터베이스의 성능 튜닝은 어떻게 디스크 I/O를 줄이느냐가 관건인 것들이 많다.

### 저장 매체

일반적으로 서버에 사용되는 저장 매체는 크게 3가지로 나뉜다.

- 내장 디스크
- DAS(Direct Attached Storage)
- NAS(Network Attached Storage)
- SAN(Storage Area Network)

  내장 디스크는 개인용 PC의 본체 내에 저장된 디스크와 같은 매체다. 개인 PC와는 달리 데이터베이스 서버용으로 사용되는 장비는 일반적으로 4~6개 정도의 내장 디스크를 장착한다.

  내장 디스크의 용량 문제를 해결하기 위해 주로 사용하는 것이 DAS인데, DAS는 컴퓨터 본체와 달리 디스크만 있는 것이 특징이다. DAS는 독자적인 사용이 불가능하며 컴퓨터 본체에 연결해서만 사용할 수 있다.

  NAS는 TCP/IP를 통해 연결된다. NAS는 동시에 여러 컴퓨터에 공유해서 사용할 수 있는 저장매체이지만, SATA, SAS 방식의 직접 연결보다는 속도가 느리다.

  SAN는 DAS로는 구축할 수 없는 대용량의 스토리지 공간을 제공하는 장치이다. 여러 컴퓨터에서 동시에 사용할 수 있고 컴퓨터 본체, 광케이블로 연결되기 때문에 속도도 상당히 빠르고 안정적이다. 하지만 고가의 구축 비용이 필요하다.

### 디스크 드라이브와 솔리드 스테이트 드라이브

CPU, 메모리와 같은 주요 장치는 대부분 전자식 장치지만 디스크 드라이브는 기계식 장치이다. 그래서 데이터베이스 서버에서는 항상 디스크 장치가 병목 지점이 된다.

SSD는 기존의 디스크 드라이브에서 데이터 저장용 플래터를 제거하고 대신 플래시 메모리를 장착하고 있다. 디스크를 회전시킬 필요가 없으므로 아주 빠르게 데이터를 읽고 쓴다.

---

## 랜덤 I/O, 순차 I/O

순차 I/O에서는 디스크의 헤더를 거의 움직이지 않으므로 SSD와 디스크 드라이브 사이에 큰 차이가 없다. 하지만 랜덤 I/O의 경우 SSD가 훨씬 빠른 속도를 보여준다. 이러한 SSD의 장점은 DBMS용 스토리지에 최적이라 할 수 있다.

### 랜덤 I/O

디스크 드라이브의 플래터를 돌려서 읽어야 할 데이터가 저장된 위치로 디스크 헤더를 옮긴 다음 데이터를 읽는 것을 의미한다.

### 순차 I/O

디스크의 성능은 디스크 헤더의 위치 이동 없이 얼마나 많은 데이터를 한 번에 기록하느냐에 의해 결정된다. 그래서 랜덤 I/O 작업이 훨씬 작업의 부하가 크다.
예를 들어 랜덤 I/O에서는 3개의 페이지를 액세스 하기 위해 3번의 시스템 콜을 요청하는 것이 되지만, 순차 I/O로 3개의 페이지에 접근 했다는 것은 한 번의 디스크 헤더 이동으로 이를 실현했다는 것을 의미한다.

### 인덱스 레인지 스캔

인덱스 레인지 스캔은 데이터를 읽기 위해 랜덤 I/O를 주로 사용하는데, 풀 테이블 스캔은 순차 I/O를 사용한다. 그래서 큰 테이블의 레코드 대부분을 읽는 작업에서는 인덱스를 사용하는 것보다 오히려 풀 테이블 스캔을 사용하도록 유도할 때도 있다.

---
