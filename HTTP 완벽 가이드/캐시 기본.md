------



## 웹 캐시

   웹 캐시는 자주 쓰이는 문서의 사본을 자동으로 보관하는 장치다. 웹 요청이 도착 했을때, 캐시된 로컬 사본이 존재 한다면 그 문서는 캐시로 부터 제공된다. 캐시는 다음과 같은 장점이 있다.

- 불필요한 데이터 전송을 줄여 비용을 절감한다.
- 네트워크 병목을 줄여준다.
- 원 서버에 대한 요청을 줄여 부하를 줄일 수 있다.
- 거리로 인한 지연을 줄여준다.



---



## 캐시의 적중과 부적중

```
캐시에 요청이 도착했을 때, 그에 대응하는 사본이 있다면 그 사본을 이용해 요청이 처리될 수 있다. 이것을 '캐시 적중'이라 하며, 대응하는 사본이 없을 경우 원 서버에 전달되는 것을 '캐시 부적중'이라 한다.
```



### 재검사

원 서버의 콘텐츠가 변경될 수 있기에 사본이 최신인지 서버를 통해 점검이 필요하다. 이러한 효과적인 재검사를 위해 HTTP는 서버로부터 전체 객체를 가져오지 않고도 빠르게 검사할 수 있는 기능을 지원한다.



**재검사 적중**

서버 객체가 변경되지 않았다면 서버는 클라이언트에게 HTTP 304 Not Modified 응답을 보낸다.



**재검사 부적중**

서버 객체가 캐시된 사본과 다르다면 서버는 콘텐츠 전체와 함께 HTTP 200 OK 응답을 클라이언트에게 보낸다.



**객체 삭제**

서버 객체가 삭제 되었다면, 404 Not Found  응답을 돌려 보내며 캐시 사본을 삭제한다.



**적중과 부적중의 구별**

HTTP는 클라이언트에게 응답이 캐시 적중이었는지 원 서버 접근인지 말해줄 수 있는 기능이 없다. 따라서 어떤 프락시 캐시는 Via헤더에 캐시 관련 정보를 붙이기도 하고, 일반적으 Date 헤더를 이용하여 알 수 있다.



---



## 캐시 토폴로지

캐시는 개인의 사용자에게 할당 되기도 하고 집단에게 공유 되기도 한다. 전자를 '개인 전용 캐시'라 하며 후자를 '공용 캐시'라 한다.



### 개인 전용 캐시

브라우저는 개인 전용 캐시를 내장하고 있다. 대부분 브라우저는 자주 쓰이는 문서를 개인용 컴퓨터의 디스크와 메모리에 캐시해 두고, 사용자는 캐시 사이즈와 설정을 수정할 수 있다. 캐시된 문서에는 무엇이 있는지 또한 브라우저를 통해 확인할 수 있다. 이를 익스플로러에서는 '임시파일' 이라 한다.



### 공용 프락시 캐시

공용 캐시는 프락시 서버 혹은 프락시 캐시라 불리는 특별한 종류의 공유된 프락시 서버다. 공용 캐시에는 여러 사용자가 접근하기 때문에 불필요한 트래픽을 더 많이 줄일 수 있다. 캐시는 자주 찾는 객체를 단 한번만 가져와 모든 요청에 대해 공유된 사본을 제공함으로써 네트워크 트래픽을 줄인다.



### 프락시 캐시 계층

작은 캐시에서 캐시 부적중이 발생했을 때 더 큰 부모 캐시가 그 트래픽을 처리하도록  계층을 만든다. 캐시 계층이 지나치게 깊다면 요청은 캐시의 긴 연쇄를 따라가게 되고, 이는 프락시의 성능 저하로 이어진다.